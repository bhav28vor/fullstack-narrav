{"ast":null,"code":"var _jsxFileName = \"/app/src/PieChart.js\";\nimport React, { useEffect } from \"react\";\nimport * as d3 from \"d3\";\nconst PieChart = ({\n  data\n}) => {\n  useEffect(() => {\n    if (data.length === 0) return;\n\n    // Clear previous chart\n    d3.select(\"#pie-chart\").selectAll(\"*\").remove();\n\n    // Set dimensions\n    const width = 400,\n      height = 400,\n      radius = Math.min(width, height) / 2;\n\n    // Create color scale\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n\n    // Compute brand-wise total sales\n    const brandSales = d3.rollups(data, v => d3.sum(v, d => d.price), d => d.company);\n\n    // Create pie and arc generators\n    const pie = d3.pie().value(d => d[1]);\n    const arc = d3.arc().innerRadius(0).outerRadius(radius);\n    const labelArc = d3.arc().innerRadius(radius * 0.6).outerRadius(radius * 0.6);\n\n    // Create SVG container\n    const svg = d3.select(\"#pie-chart\").append(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\").attr(\"transform\", `translate(${width / 2},${height / 2})`);\n\n    // Draw pie slices\n    const arcs = svg.selectAll(\".arc\").data(pie(brandSales)).enter().append(\"g\").attr(\"class\", \"arc\");\n    arcs.append(\"path\").attr(\"d\", arc).attr(\"fill\", d => color(d.data[0]));\n\n    // Add percentage labels\n    arcs.append(\"text\").attr(\"transform\", d => `translate(${labelArc.centroid(d)})`).style(\"text-anchor\", \"middle\").style(\"font-size\", \"14px\").style(\"fill\", \"#fff\").text(d => `${d.data[0]} (${Math.round(d.data[1] / d3.sum(brandSales, d => d[1]) * 100)}%)`);\n  }, [data]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"pie-chart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 10\n    }\n  });\n};\nexport default PieChart;","map":{"version":3,"names":["React","useEffect","d3","PieChart","data","length","select","selectAll","remove","width","height","radius","Math","min","color","scaleOrdinal","schemeCategory10","brandSales","rollups","v","sum","d","price","company","pie","value","arc","innerRadius","outerRadius","labelArc","svg","append","attr","arcs","enter","centroid","style","text","round","createElement","id","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/app/src/PieChart.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport * as d3 from \"d3\";\n\nconst PieChart = ({ data }) => {\n  useEffect(() => {\n    if (data.length === 0) return;\n\n    // Clear previous chart\n    d3.select(\"#pie-chart\").selectAll(\"*\").remove();\n\n    // Set dimensions\n    const width = 400, height = 400, radius = Math.min(width, height) / 2;\n\n    // Create color scale\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n\n    // Compute brand-wise total sales\n    const brandSales = d3.rollups(data, v => d3.sum(v, d => d.price), d => d.company);\n    \n    // Create pie and arc generators\n    const pie = d3.pie().value(d => d[1]);\n    const arc = d3.arc().innerRadius(0).outerRadius(radius);\n    const labelArc = d3.arc().innerRadius(radius * 0.6).outerRadius(radius * 0.6);\n\n    // Create SVG container\n    const svg = d3.select(\"#pie-chart\")\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${width / 2},${height / 2})`);\n\n    // Draw pie slices\n    const arcs = svg.selectAll(\".arc\")\n      .data(pie(brandSales))\n      .enter().append(\"g\")\n      .attr(\"class\", \"arc\");\n\n    arcs.append(\"path\")\n      .attr(\"d\", arc)\n      .attr(\"fill\", d => color(d.data[0]));\n\n    // Add percentage labels\n    arcs.append(\"text\")\n      .attr(\"transform\", d => `translate(${labelArc.centroid(d)})`)\n      .style(\"text-anchor\", \"middle\")\n      .style(\"font-size\", \"14px\")\n      .style(\"fill\", \"#fff\")\n      .text(d => `${d.data[0]} (${Math.round((d.data[1] / d3.sum(brandSales, d => d[1])) * 100)}%)`);\n    \n  }, [data]);\n\n  return <div id=\"pie-chart\"></div>;\n};\n\nexport default PieChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}