{"ast":null,"code":"var _jsxFileName = \"/Users/vorambhavan/fullstack-task/frontend/src/BarChart.js\";\nimport React, { useEffect } from \"react\";\nimport * as d3 from \"d3\";\nconst BarChart = ({\n  data\n}) => {\n  useEffect(() => {\n    if (!data || data.length === 0) return;\n\n    // Clear existing chart\n    d3.select(\"#bar-chart\").selectAll(\"*\").remove();\n\n    // Set up dimensions\n    const margin = {\n      top: 40,\n      right: 60,\n      bottom: 80,\n      left: 70\n    };\n    const width = 800 - margin.left - margin.right;\n    const height = 400 - margin.top - margin.bottom;\n\n    // Group data by car model\n    const groupedData = d3.group(data, d => d.car_model);\n\n    // Extract unique brands\n    const brands = [...new Set(data.map(d => d.company))];\n\n    // Create color scale\n    const color = d3.scaleOrdinal().domain(brands).range(d3.schemeCategory10);\n\n    // Stack data format for multiple brands in one bar\n    const stack = d3.stack().keys(brands).value((d, key) => d[1].filter(item => item.company === key).reduce((sum, curr) => sum + curr.price, 0))(Array.from(groupedData));\n\n    // Create scales\n    const x = d3.scaleBand().domain([...groupedData.keys()]).range([0, width]).padding(0.3);\n    const y = d3.scaleLinear().domain([0, d3.max(stack, layer => d3.max(layer, d => d[1]))]).nice().range([height, 0]);\n\n    // Create SVG container\n    const svg = d3.select(\"#bar-chart\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n    // Add stacked bars\n    svg.append(\"g\").selectAll(\"g\").data(stack).enter().append(\"g\").attr(\"fill\", d => color(d.key)).selectAll(\"rect\").data(d => d).enter().append(\"rect\").attr(\"x\", d => x(d.data[0])).attr(\"y\", d => y(d[1])).attr(\"height\", d => y(d[0]) - y(d[1])).attr(\"width\", x.bandwidth()).on(\"mouseover\", function (event, d) {\n      d3.select(this).attr(\"opacity\", 0.7);\n      tooltip.style(\"visibility\", \"visible\").html(`Sales: $${(d[1] - d[0]).toLocaleString()}`).style(\"top\", `${event.pageY - 20}px`).style(\"left\", `${event.pageX + 10}px`);\n    }).on(\"mouseout\", function () {\n      d3.select(this).attr(\"opacity\", 1);\n      tooltip.style(\"visibility\", \"hidden\");\n    });\n\n    // X-axis\n    svg.append(\"g\").attr(\"transform\", `translate(0, ${height})`).call(d3.axisBottom(x)).selectAll(\"text\").attr(\"transform\", \"rotate(-30)\").style(\"text-anchor\", \"end\").style(\"font-size\", \"12px\");\n\n    // Y-axis\n    svg.append(\"g\").call(d3.axisLeft(y).ticks(6)).style(\"font-size\", \"12px\");\n\n    // X-axis label\n    svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", height + 50).style(\"text-anchor\", \"middle\").style(\"font-size\", \"14px\").text(\"Car Model\");\n\n    // Y-axis label\n    svg.append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"y\", -margin.left + 20).attr(\"x\", -height / 2).style(\"text-anchor\", \"middle\").style(\"font-size\", \"14px\").text(\"Total Sales (USD)\");\n\n    // Tooltip\n    const tooltip = d3.select(\"#bar-chart\").append(\"div\").style(\"position\", \"absolute\").style(\"background\", \"#fff\").style(\"border\", \"1px solid #ccc\").style(\"padding\", \"6px\").style(\"border-radius\", \"5px\").style(\"visibility\", \"hidden\");\n\n    // Add legend\n    const legend = svg.append(\"g\").attr(\"transform\", `translate(${width - 150}, 0)`);\n    brands.forEach((brand, i) => {\n      const legendRow = legend.append(\"g\").attr(\"transform\", `translate(0, ${i * 20})`);\n      legendRow.append(\"rect\").attr(\"width\", 15).attr(\"height\", 15).attr(\"fill\", color(brand));\n      legendRow.append(\"text\").attr(\"x\", 20).attr(\"y\", 12).text(brand).style(\"font-size\", \"12px\").attr(\"alignment-baseline\", \"middle\");\n    });\n  }, [data]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"bar-chart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 10\n    }\n  });\n};\nexport default BarChart;","map":{"version":3,"names":["React","useEffect","d3","BarChart","data","length","select","selectAll","remove","margin","top","right","bottom","left","width","height","groupedData","group","d","car_model","brands","Set","map","company","color","scaleOrdinal","domain","range","schemeCategory10","stack","keys","value","key","filter","item","reduce","sum","curr","price","Array","from","x","scaleBand","padding","y","scaleLinear","max","layer","nice","svg","append","attr","enter","bandwidth","on","event","tooltip","style","html","toLocaleString","pageY","pageX","call","axisBottom","axisLeft","ticks","text","legend","forEach","brand","i","legendRow","createElement","id","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/vorambhavan/fullstack-task/frontend/src/BarChart.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport * as d3 from \"d3\";\n\nconst BarChart = ({ data }) => {\n  useEffect(() => {\n    if (!data || data.length === 0) return;\n\n    // Clear existing chart\n    d3.select(\"#bar-chart\").selectAll(\"*\").remove();\n\n    // Set up dimensions\n    const margin = { top: 40, right: 60, bottom: 80, left: 70 };\n    const width = 800 - margin.left - margin.right;\n    const height = 400 - margin.top - margin.bottom;\n\n    // Group data by car model\n    const groupedData = d3.group(data, d => d.car_model);\n\n    // Extract unique brands\n    const brands = [...new Set(data.map(d => d.company))];\n\n    // Create color scale\n    const color = d3.scaleOrdinal()\n      .domain(brands)\n      .range(d3.schemeCategory10);\n\n    // Stack data format for multiple brands in one bar\n    const stack = d3.stack()\n      .keys(brands)\n      .value((d, key) => d[1].filter(item => item.company === key).reduce((sum, curr) => sum + curr.price, 0))\n      (Array.from(groupedData));\n\n    // Create scales\n    const x = d3.scaleBand()\n      .domain([...groupedData.keys()])\n      .range([0, width])\n      .padding(0.3);\n\n    const y = d3.scaleLinear()\n      .domain([0, d3.max(stack, layer => d3.max(layer, d => d[1]))])\n      .nice()\n      .range([height, 0]);\n\n    // Create SVG container\n    const svg = d3.select(\"#bar-chart\")\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n    // Add stacked bars\n    svg.append(\"g\")\n      .selectAll(\"g\")\n      .data(stack)\n      .enter().append(\"g\")\n      .attr(\"fill\", d => color(d.key))\n      .selectAll(\"rect\")\n      .data(d => d)\n      .enter().append(\"rect\")\n      .attr(\"x\", d => x(d.data[0]))\n      .attr(\"y\", d => y(d[1]))\n      .attr(\"height\", d => y(d[0]) - y(d[1]))\n      .attr(\"width\", x.bandwidth())\n      .on(\"mouseover\", function (event, d) {\n        d3.select(this).attr(\"opacity\", 0.7);\n        tooltip.style(\"visibility\", \"visible\")\n          .html(`Sales: $${(d[1] - d[0]).toLocaleString()}`)\n          .style(\"top\", `${event.pageY - 20}px`)\n          .style(\"left\", `${event.pageX + 10}px`);\n      })\n      .on(\"mouseout\", function () {\n        d3.select(this).attr(\"opacity\", 1);\n        tooltip.style(\"visibility\", \"hidden\");\n      });\n\n    // X-axis\n    svg.append(\"g\")\n      .attr(\"transform\", `translate(0, ${height})`)\n      .call(d3.axisBottom(x))\n      .selectAll(\"text\")\n      .attr(\"transform\", \"rotate(-30)\")\n      .style(\"text-anchor\", \"end\")\n      .style(\"font-size\", \"12px\");\n\n    // Y-axis\n    svg.append(\"g\")\n      .call(d3.axisLeft(y).ticks(6))\n      .style(\"font-size\", \"12px\");\n\n    // X-axis label\n    svg.append(\"text\")\n      .attr(\"x\", width / 2)\n      .attr(\"y\", height + 50)\n      .style(\"text-anchor\", \"middle\")\n      .style(\"font-size\", \"14px\")\n      .text(\"Car Model\");\n\n    // Y-axis label\n    svg.append(\"text\")\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"y\", -margin.left + 20)\n      .attr(\"x\", -height / 2)\n      .style(\"text-anchor\", \"middle\")\n      .style(\"font-size\", \"14px\")\n      .text(\"Total Sales (USD)\");\n\n    // Tooltip\n    const tooltip = d3.select(\"#bar-chart\")\n      .append(\"div\")\n      .style(\"position\", \"absolute\")\n      .style(\"background\", \"#fff\")\n      .style(\"border\", \"1px solid #ccc\")\n      .style(\"padding\", \"6px\")\n      .style(\"border-radius\", \"5px\")\n      .style(\"visibility\", \"hidden\");\n\n    // Add legend\n    const legend = svg.append(\"g\")\n      .attr(\"transform\", `translate(${width - 150}, 0)`);\n\n    brands.forEach((brand, i) => {\n      const legendRow = legend.append(\"g\")\n        .attr(\"transform\", `translate(0, ${i * 20})`);\n\n      legendRow.append(\"rect\")\n        .attr(\"width\", 15)\n        .attr(\"height\", 15)\n        .attr(\"fill\", color(brand));\n\n      legendRow.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", 12)\n        .text(brand)\n        .style(\"font-size\", \"12px\")\n        .attr(\"alignment-baseline\", \"middle\");\n    });\n\n  }, [data]);\n\n  return <div id=\"bar-chart\"></div>;\n};\n\nexport default BarChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}