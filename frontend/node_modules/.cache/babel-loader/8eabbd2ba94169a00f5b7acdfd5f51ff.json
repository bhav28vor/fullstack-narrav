{"ast":null,"code":"var _jsxFileName = \"/Users/vorambhavan/fullstack-task/frontend/src/LineChart.js\";\nimport React, { useEffect } from \"react\";\nimport * as d3 from \"d3\";\nconst LineChart = ({\n  data\n}) => {\n  useEffect(() => {\n    if (data.length === 0) return;\n\n    // Clear previous chart\n    d3.select(\"#line-chart\").selectAll(\"*\").remove();\n\n    // Set chart dimensions with improved spacing\n    const margin = {\n      top: 40,\n      right: 50,\n      bottom: 80,\n      left: 70\n    };\n    const width = 800 - margin.left - margin.right;\n    const height = 400 - margin.top - margin.bottom;\n\n    // Parse date and sort data by date\n    const parseDate = d3.timeParse(\"%Y-%m-%d\");\n    const formattedData = data.map(d => ({\n      date: parseDate(d.date_of_sale),\n      price: d.price\n    })).sort((a, b) => a.date - b.date);\n\n    // Create scales\n    const x = d3.scaleTime().domain(d3.extent(formattedData, d => d.date)).range([0, width]);\n    const y = d3.scaleLinear().domain([0, d3.max(formattedData, d => d.price)]).nice().range([height, 0]);\n\n    // Create SVG\n    const svg = d3.select(\"#line-chart\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n    // Create line generator\n    const line = d3.line().x(d => x(d.date)).y(d => y(d.price)).curve(d3.curveMonotoneX);\n\n    // Append line path\n    svg.append(\"path\").datum(formattedData).attr(\"fill\", \"none\").attr(\"stroke\", \"steelblue\").attr(\"stroke-width\", 2).attr(\"d\", line);\n\n    // Create X-axis\n    svg.append(\"g\").attr(\"transform\", `translate(0, ${height})`).call(d3.axisBottom(x).ticks(6).tickFormat(d3.timeFormat(\"%b %Y\"))).selectAll(\"text\").attr(\"transform\", \"rotate(-30)\").style(\"text-anchor\", \"end\").style(\"font-size\", \"12px\");\n\n    // Create Y-axis\n    svg.append(\"g\").call(d3.axisLeft(y).ticks(6)).style(\"font-size\", \"12px\");\n\n    // Add X-axis label\n    svg.append(\"text\").attr(\"transform\", `translate(${width / 2}, ${height + 60})`).style(\"text-anchor\", \"middle\").style(\"font-size\", \"14px\").text(\"Date of Sale\");\n\n    // Add Y-axis label\n    svg.append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"y\", -margin.left + 15).attr(\"x\", -height / 2).style(\"text-anchor\", \"middle\").style(\"font-size\", \"14px\").text(\"Price (USD)\");\n\n    // Tooltip for hover effect\n    const tooltip = d3.select(\"#line-chart\").append(\"div\").style(\"position\", \"absolute\").style(\"background\", \"#fff\").style(\"border\", \"1px solid #ccc\").style(\"padding\", \"6px\").style(\"border-radius\", \"5px\").style(\"visibility\", \"hidden\");\n\n    // Circles for each data point with tooltip\n    svg.selectAll(\".dot\").data(formattedData).enter().append(\"circle\").attr(\"cx\", d => x(d.date)).attr(\"cy\", d => y(d.price)).attr(\"r\", 5).attr(\"fill\", \"red\").on(\"mouseover\", function (event, d) {\n      d3.select(this).attr(\"r\", 7);\n      tooltip.style(\"visibility\", \"visible\").html(`Date: ${d3.timeFormat(\"%b %d, %Y\")(d.date)}<br>Price: $${d.price.toLocaleString()}`).style(\"top\", `${event.pageY - 30}px`).style(\"left\", `${event.pageX + 10}px`);\n    }).on(\"mouseout\", function () {\n      d3.select(this).attr(\"r\", 5);\n      tooltip.style(\"visibility\", \"hidden\");\n    });\n\n    // **Sales Trend Line (Best Fit Line)**\n    const trendLine = d3.line().x(d => x(d.date)).y((d, i, arr) => {\n      const avgPrice = d3.mean(arr, d => d.price);\n      return y(avgPrice);\n    }).curve(d3.curveMonotoneX);\n    svg.append(\"path\").datum(formattedData).attr(\"fill\", \"none\").attr(\"stroke\", \"orange\").attr(\"stroke-width\", 2).style(\"stroke-dasharray\", \"5,5\") // Dashed line for trend\n    .attr(\"d\", trendLine);\n  }, [data]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"line-chart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 10\n    }\n  });\n};\nexport default LineChart;","map":{"version":3,"names":["React","useEffect","d3","LineChart","data","length","select","selectAll","remove","margin","top","right","bottom","left","width","height","parseDate","timeParse","formattedData","map","d","date","date_of_sale","price","sort","a","b","x","scaleTime","domain","extent","range","y","scaleLinear","max","nice","svg","append","attr","line","curve","curveMonotoneX","datum","call","axisBottom","ticks","tickFormat","timeFormat","style","axisLeft","text","tooltip","enter","on","event","html","toLocaleString","pageY","pageX","trendLine","i","arr","avgPrice","mean","createElement","id","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/vorambhavan/fullstack-task/frontend/src/LineChart.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport * as d3 from \"d3\";\n\nconst LineChart = ({ data }) => {\n  useEffect(() => {\n    if (data.length === 0) return;\n\n    // Clear previous chart\n    d3.select(\"#line-chart\").selectAll(\"*\").remove();\n\n    // Set chart dimensions with improved spacing\n    const margin = { top: 40, right: 50, bottom: 80, left: 70 };\n    const width = 800 - margin.left - margin.right;\n    const height = 400 - margin.top - margin.bottom;\n\n    // Parse date and sort data by date\n    const parseDate = d3.timeParse(\"%Y-%m-%d\");\n    const formattedData = data.map(d => ({\n      date: parseDate(d.date_of_sale),\n      price: d.price\n    })).sort((a, b) => a.date - b.date);\n\n    // Create scales\n    const x = d3.scaleTime()\n      .domain(d3.extent(formattedData, d => d.date))\n      .range([0, width]);\n\n    const y = d3.scaleLinear()\n      .domain([0, d3.max(formattedData, d => d.price)])\n      .nice()\n      .range([height, 0]);\n\n    // Create SVG\n    const svg = d3.select(\"#line-chart\")\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n    // Create line generator\n    const line = d3.line()\n      .x(d => x(d.date))\n      .y(d => y(d.price))\n      .curve(d3.curveMonotoneX);\n\n    // Append line path\n    svg.append(\"path\")\n      .datum(formattedData)\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"steelblue\")\n      .attr(\"stroke-width\", 2)\n      .attr(\"d\", line);\n\n    // Create X-axis\n    svg.append(\"g\")\n      .attr(\"transform\", `translate(0, ${height})`)\n      .call(d3.axisBottom(x).ticks(6).tickFormat(d3.timeFormat(\"%b %Y\")))\n      .selectAll(\"text\")\n      .attr(\"transform\", \"rotate(-30)\")\n      .style(\"text-anchor\", \"end\")\n      .style(\"font-size\", \"12px\");\n\n    // Create Y-axis\n    svg.append(\"g\")\n      .call(d3.axisLeft(y).ticks(6))\n      .style(\"font-size\", \"12px\");\n\n    // Add X-axis label\n    svg.append(\"text\")\n      .attr(\"transform\", `translate(${width / 2}, ${height + 60})`)\n      .style(\"text-anchor\", \"middle\")\n      .style(\"font-size\", \"14px\")\n      .text(\"Date of Sale\");\n\n    // Add Y-axis label\n    svg.append(\"text\")\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"y\", -margin.left + 15)\n      .attr(\"x\", -height / 2)\n      .style(\"text-anchor\", \"middle\")\n      .style(\"font-size\", \"14px\")\n      .text(\"Price (USD)\");\n\n    // Tooltip for hover effect\n    const tooltip = d3.select(\"#line-chart\")\n      .append(\"div\")\n      .style(\"position\", \"absolute\")\n      .style(\"background\", \"#fff\")\n      .style(\"border\", \"1px solid #ccc\")\n      .style(\"padding\", \"6px\")\n      .style(\"border-radius\", \"5px\")\n      .style(\"visibility\", \"hidden\");\n\n    // Circles for each data point with tooltip\n    svg.selectAll(\".dot\")\n      .data(formattedData)\n      .enter().append(\"circle\")\n      .attr(\"cx\", d => x(d.date))\n      .attr(\"cy\", d => y(d.price))\n      .attr(\"r\", 5)\n      .attr(\"fill\", \"red\")\n      .on(\"mouseover\", function (event, d) {\n        d3.select(this).attr(\"r\", 7);\n        tooltip.style(\"visibility\", \"visible\")\n          .html(`Date: ${d3.timeFormat(\"%b %d, %Y\")(d.date)}<br>Price: $${d.price.toLocaleString()}`)\n          .style(\"top\", `${event.pageY - 30}px`)\n          .style(\"left\", `${event.pageX + 10}px`);\n      })\n      .on(\"mouseout\", function () {\n        d3.select(this).attr(\"r\", 5);\n        tooltip.style(\"visibility\", \"hidden\");\n      });\n\n    // **Sales Trend Line (Best Fit Line)**\n    const trendLine = d3.line()\n      .x(d => x(d.date))\n      .y((d, i, arr) => {\n        const avgPrice = d3.mean(arr, d => d.price);\n        return y(avgPrice);\n      })\n      .curve(d3.curveMonotoneX);\n\n    svg.append(\"path\")\n      .datum(formattedData)\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"orange\")\n      .attr(\"stroke-width\", 2)\n      .style(\"stroke-dasharray\", \"5,5\") // Dashed line for trend\n      .attr(\"d\", trendLine);\n\n  }, [data]);\n\n  return <div id=\"line-chart\"></div>;\n};\n\nexport default LineChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}